# Welcome to Vim [PART-1]

Vim is a very powerful shiz

gvim
neovim (nvim)

There are ports to all major IDEs
gets tied to your muscle memory. Typing is not a blocker. helps easily in churning out text. Going back will feel like stone age.

## What the hell is this Vim?

Goes well with the linux philosophy of- Do one thing and do it well

## What we'll be discussing:

Vim




## How to install

Some form of Vim will come preinstalled in (almost) all the prominent linux distributions (even if you manage to hack into an android phone or a server). However, that preinstalled form might be limited, as is the case of recent Ubuntu distributions, which ships with ```Vi```, the predecessor of Vim. ~A long time ago there existed the powerful editors ed and vi~ We will be discussing about the rich heritage history about Vim, but some other day. For now, installation is as simple as- 
```bash
sudo apt install vim 
```
To check the installation, open up a terminal and type ```vim```


## How to Quit

This question is one of the most frequent question asked on Stackoverflow, and is an element to a plethora of memes like [here](https://www.reddit.com/r/ProgrammerHumor/comments/33a6p7/how_do_you_generate_a_random_string/)
> **How do you generate a random string?**  
> Put a fresh student in front of vim and tell him to quit.

For now, Just remember this- 
```
:q!  # To force quit without saving anything
:wq  # To write and quit
```
Don't worry, We'll discuss why this process is so quirky. It'll all make sense in some time.


## Why the quit process is so quirky (Modes in Vim)
One of the reasons why Vim is so powerful, is because Vim unlike other editors, is a *Modal* editor. This means, the keys of the keyboard have a different functions associated to them when they are in different modes. There are 6 total modes in Vim, out of which you will be dealing with 3 modes on a day-to-day basis:  

* **NORMAL Mode**  
This is the default mode Vim starts in. You can NOT insert text directly in this mode. There are various Text Editing functionalities available in this mode, which we'll discuss in later part. You are ideally supposed to stay in this mode all the time when you are not entering any text.  
  
* **INSERT Mode**   
This is the mode where you go in to insert text. In this mode, the editor functions similar to any other text editor, and hence is the most appealing mode to be initially. But in an ideal scenario, you should leave this mode as soon as you are done entering text. To go to this mode, press ```i``` in ```NORMAL``` mode. TTo exit this mode to go back to ```NORMAL``` mode, Press ```Esc```. There are some advanced ways to get into this mode, which are discussed later.  
  
* **COMMAND Mode**
This mode supports entering custom commands, including file operations like Opening, Closing, and saving. This mode can be invoked by pressing ```:``` in ```NORMAL``` mode. This is the reason why to quit a file, you need to go to ```COMMAND``` mode first by invoking `:`, and then press ``wq`` to *write and quit*, or ```q!``` to *quit forcefully*. To exit this mode to go back to ```NORMAL``` mode, Press ```Esc```.  


This is better described in the diagram below:  
  
![test](https://i.stack.imgur.com/BN6vl.png)

This mode also supports some advanced batch text editing functionalities, which we'll discuss in the next discussion.



* **VISUAL Modes**  
This mode is used to Visually Select some part of text. There are further subparts to this mode:  
  
- Visual Character Mode (```v``` in ```NORMAL``` mode to invoke)  
 Mode to select on character basis. 
![](https://opensource.com/sites/default/files/uploads/vim-visual-char1.png)   
  
- Visual Line Mode (```Shift + v``` in ```NORMAL``` mode to invoke)  
Mode to select on Line basis  
![](https://opensource.com/sites/default/files/uploads/vim-visual-line1.png)  
  
- Block Mode (```Ctrl + v``` in ```NORMAL``` mode to invoke)  
Mode to select on Block basis  
![](https://opensource.com/sites/default/files/uploads/vim-visual-block2.png)  

To exit this mode to go back to ```NORMAL``` mode, Press ```Esc```.  

* **EX mode**  
> The first rule of Vim Club is, You don't talk about the EX mode.  


We wil be discussing the basics of the first three modes mentioned in bold in this session. We'll be discussing the other modes and advanced modes in later discussions.



## Vim Motions   
```
Arrow Keys  : As expected  
j/k         : up/down                         
h/l         : left/right  
w           : word  (only alphanumeric)  
W           : Word till next space (including special characters)  
e           : end of current word  
b           : back by a word
^           : start of line (text)  
0           : start of line  
$         : end of line 
%           : inside a tag (bracket, paranthesis, html tag, function, etc)  
gg        : Start of file
Shift+G   : End of file
```

## Vim Grammar   
You can combine Motions with Operator and get impressive results. The syntax to use a proper grammar is-  
`Operator` + `<identifier>` + `<motion>`  

The most common options for Operator are- 
* **Delete**  (keyword `d`)
* **Change**  (keyword `c`)  
* **Yank (copy)**    (keyword `y`)   

Some special identifiers are-  
* **inner**  (keyword `i`)  
* **around** (keyword `a`)  

Example uses:  
Delete word ->   ```dw```


> PRO TIP: A good way to remember this initially, is to speak out what you are going to do.  
> "delete two words" -> `d2w`  
> "Yank (copy) inside () brackets" -> `yi)`



## Find and replace  
The main way to search is `/` + `searchterm` in `NORMAL` mode. This will search for the searchterm in the file from your current position in the file towards the end of the file. To go to the next occurance of the searchterm, press `n`. To go to the previous, press `p`.  

Some other search methods include:  
- `?`+`searchterm` searches the file from current position towards the top of the file.
- `*` under a word performs search of that word directly towards end of file.
- `#` under a word performs search of that word directly towards top of the file.




## Dot Command  
Whatever last atomic command you performed, can be reiterated again by using the `.` command in `NORMAL` mode. This is very useful for Search and replace scenarios.  
Ex: You want to replace occurances of *abde* with *abcd* in some locations. You search for *abde* using `/abde<ENTER>`, go to first occurance and change the word to *abcd* by {`cw` + `abcd`}. This operation is considered atomic. You can go to the next search result (`n`) and replicate the same behavior there by doing just `.`     

## Undo/Redo
You can Undo using `u` in `NORMAL` Mode.  
To Redo, `Ctrl`+`R` in `NORMAL` Mode. 


## Code Debugging: Code Tags  
For easier code navigation, the following are supported-

* **Move by tags**   



Install ctags using  
```
sudo apt install -y exuberant-ctags

```  

Once done installing, You can generate code tags for easier movement by doing:   
``` 
ctags -R .
```
at the root directory.   

Once this is done, You can move by tags in a project. i.e. if you find a declaration like
```python3
import MilvusDB from Search
import FRInterface
...

fr_obj = FRInterface.getInstance()
```
You can directly open the Class/Function declaration by moving your cursor under the keyword and using `Ctrl` + `]`. In the snippet above, if you place your cursor below FRInterface.getInstance(), it will directly open up the file containing FRInterface class and move the cursor to the line having the declaration of getInstance().   
To exit away from the opened class/function, use `Ctrl` + `t`


There are some more ways to navigate, we'll be discussing this in later discussions.

* **Move by declaration**
* **Move by File**






### [Advanced] All the ways to go to insert mode
```
i    Insert text before the cursor
I    Insert text before the first non-blank character of the line.
a    Append text after the cursor
A    Append text at the end of line
o    Starts a new line below the cursor and insert text
O    Starts a new line above the cursor and insert text
s    Delete the character under the cursor and insert text
S    Delete the current line and insert text
gi   Insert text in same position where the last insert mode was stopped in current buffer
gI   Insert text at the start of line (column 1)
```


## tl;dr version

Just to get you going!  

### Switching between ***NORMAL*** and ***Insert*** mode

Action | Keys
:--|:--
Switch to ***NORMAL*** mode | `<Esc>`
Switch to ***Insert*** mode | `i`
Switch to ***Insert*** mode, moving the cursor to the end of the current line | `A`
Switch to ***Insert*** mode, adding a new line under the current line, and moving the cursor to the new line | `o`

### Moving the cursor around the file

Action | Keys
:--|:--
Page up | `<Ctrl>` + `u`
Page down | `<Ctrl>` + `d`
Move the cursor to the next word | `W`
Move the cursor to the previous word | `b`
Move the cursor to the start of the current line | `0`
Move the cursor to the end of the current line | `$`
Move the cursor to a particular line of the file (eg. line number 9) | `9G`

Of course, you can also move the cursor using any of the arrow keys (<code>&uarr;</code>, <code>&darr;</code>, <code>&larr;</code>, <code>&rarr;</code>), but it will be a lot faster to use the above commands.

### Delete/cut

Action | Keys
:--|:--
Delete the line under the cursor | `dd`
Delete the word under the cursor | `dw`
Delete the character under the cursor | `x`

Because whatever you delete is copied into Vim&rsquo;s clipboard, these 3 commands are akin to performing a cut.

### Copy and paste

Action | Keys
:--|:--
Copy the current line | `yy`
Copy a particular number of lines, starting from the current line (eg. 3 lines) | `3yy`
Paste | `p`

You can also specify the text to be copied using a text selection. It is a bit more involved, though:

1. While in ***NORMAL*** mode, press `v` to switch to ***VISUAL*** mode. You should see <code>--&nbsp;VISUAL&nbsp;--</code> on the bottom-left hand corner of your window.
2. [Move the cursor](#moving-the-cursor-around-the-file) to adjust the text selection.
3. When you have selected the text that you want to copy, press `y`. This will bring you back to ***NORMAL*** mode, and the selected text will have been copied into Vim&rsquo;s clipboard.

### Undo and redo

Action | Keys
:--|:--
Undo | `u`
Redo | `<Ctrl>` + `r`




## Utils

- grep
- find . | grep
- 
- ctags and movement

- change inside (Grammar)
- 
- yanking and pasting
- gg/G
- Ctrl+D/Ctrl+U
- undo/redo



## [TEMP] Stuff thrown away for Part 2
 - Multiple cursors
 - Splits (hori, vertical)
 - !<run>
 - batch commands (%s, %d)
 - Managing tabs (python)
 -  g+ Ctrl+A 
 - Ctrl+X Ctrl+F
 - gf goto file
 - w/b (motions)
